group 'com.nextstory.nextstory'
version '1.0.0'

buildscript {
  ext {
    kotlinVersion = '1.7.22'
  }

  repositories {
    google()
    mavenCentral()
  }

  dependencies {
    classpath 'com.android.tools.build:gradle:8.1.4'
    classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"
  }
}

rootProject.allprojects {
  repositories {
    google()
    mavenCentral()
  }
}

def localProperties = new Properties()
def localPropertiesFile = rootProject.file('local.properties')
if (localPropertiesFile.exists()) {
  localPropertiesFile.withReader('UTF-8') { reader ->
    localProperties.load(reader)
  }
}

def flutterRoot = localProperties.getProperty('flutter.sdk')
if (flutterRoot == null) {
  throw new GradleException('Flutter SDK not found. Define location with flutter.sdk in the local.properties file.')
}

apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'

android {
  namespace 'com.nextstory.nextstory'
  compileSdk 34

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
  }

  kotlinOptions {
    jvmTarget = '1.8'
  }

  defaultConfig {
    minSdk 23
  }

  testOptions {
    unitTests.all {
      useJUnitPlatform()

      testLogging {
        events 'passed', 'skipped', 'failed', 'standardOut', 'standardError'
        outputs.upToDateWhen { false }
        showStandardStreams = true
      }
    }
  }

  lintOptions {
    checkAllWarnings true
    warningsAsErrors true
    disable 'AndroidGradlePluginVersion', 'InvalidPackage', 'GradleDependency'
  }

  dependencies {
    testImplementation 'org.jetbrains.kotlin:kotlin-test'
    testImplementation 'org.mockito:mockito-core:5.0.0'
    implementation "org.jetbrains.kotlin:kotlin-stdlib"
  }
}
